
00:00:00
so now let's return to this idea of channels now we've already talked about channels and we know a little bit about them already however we need to cover a bit of subtlety that we haven't discussed before so that you can be prepared for troubleshooting there are two kinds of channel the first kind is called a message Channel and the second kind is called a qmi channel and we've already covered qmi so if this is a strange uh term for you then go back and just look at the video there that should be pretty clear and the second thing we have to keep in mind is we have something called a direction and the direction there are two kinds there are two directions the one the first one is unidirectional and the second kind is second direction is called bidirectional and this should be pretty clear for anyone who's coming in from an analyst notebook background because you


00:01:01
know in these ERM systems that you have two entities very often they or more and they are connected across links and that really matters because the link Direction makes a huge difference if you've got a terrorist here and you got a terrorist here you're trying to model their behavior you need to know who called who and that is explained or modeled through the direction of the link so the again this is sort of analogous to the Q world so you can have a Q here and a q here and and again we've explained this as being a channel connecting the two together now the way this works is that a message is a message channel is unidirectional and likewise a qmi channel is bir directional so let's see how this let's see how this works if you have on the left here we have a Q


00:02:03
manager and remember uh these are sort of considered servers in the QI world but we'll come back to that so you have a Q you have a Q manager on the left and you have a Q manager on the right the way that you connect these two together is via a messaging channel so we're going to connect these together but remember these are un unidirectional channels which means that if you are connect connecting the two you need to explicitly tell the system which direction they're going so this might be say in and this might be out and this is the idea behind a message Channel and for more details about a message Channel you can come here and see message Channel mqi channels we're going to cover mqi in just a second notice the way this works uh you have in fact we didn't quite draw it this way but uh the mq Q manager is here and then it's on


00:03:03
the right we did draw that what we didn't draw was the MCA and the MCA is What's called the message Channel agent and it connects the two together so you don't actually directly connect M the qm or the the Q manager A to B you in fact connect it over the MCA okay so what does that look like well it's actually fairly straightforward it's essentially exactly what we did draw except we need to add an MC here and of course there's a corresponding MCA over here and again like we had said before there's still going to be this connection here and let's call it a for example like they did in their diagram and this is be this would be uh connection B now the thing that to keep in mind here is that when you create these connections you have to do it in two locations and what do I mean by that well here's the first location and here's the second location so you you are literally when you create these you're going to define the


00:04:04
connection as a so that you're going to set the name to a or someone will have set the name to a and this one will also have been set and that will be set to a and if they're both set to a then you have essentially created the actual Channel called a that is communication will flow across these flow across a now if you don't do that if you make a mistake and you know you call one a and you call a a or something then this this is not going to work the connection won't work so that is important so in order for a to be created you have to have the name set here you have to have the name set here and you have to have something called the type set as well and the types have to be compatible with each other then separately you're going to have a connection B just like this and set up exactly the same way of course except that you're you're going to have a b you're going to define the name as B going to define the name as B here so that's two different locations you've set that up and of course you're going to have a type here and you're going to have a type here they also have to be compatible just like before and because of this kind of repetition so


00:05:05
you're sort of doing it you're setting it up once here you're setting it up uh and then you're and then you're actually setting it up is sort of again here and then you're you're doing it again here on three and you're doing it again on four in order to get bir directional transfers to work like this via messaging uh channels this is referred to as a pair and this is uh typical because you have essentially two sort of pairs in order to get a that's one and B that's two to work you need to set them up as these sort of pairs now this is the environment where we're talking about message channels but what we haven't covered yet is qmi now we have talked about qmi uh before but when you set up a qmi channel your environment changes these are no longer Q managers now what we have is our application here and our second application here and remember we have our middleware here and of course in our


00:06:07
case this is going to be mq and if you remember from the presentation on qmi what's actually happening here is that you have a new thing here this is called an end point and in fact that is using what's called qmi and qmi is one of the apis if this is sort of uh new to you just go to the video on qmi to help explain that but remember here that messaging is unidirectional message channels qmi is bidirectional so in the world of qmi once you set this up it's bir directional now again you still need to set it up in two different locations so you still set it up here and then you set it up here which creates again it creates a pair a single pair not two pairs and then separately when you refer to this connection uh you refer to it because this is remember this is the


00:07:07
client side and this is the server side the message Q is considered a server you when you set it up this is called the clnt con client connection and this is called the svr con or the server connection so if you turn to the mq primer page 53 you can see an example of this so what we have had been showing previously as a would be say a client written in the C programming language that's this over here and notice what the application the C application is doing it's setting the mq server this is an environment variable you don't have to worry about that for right now but it is indeed environment variable and what it's doing is the client is doing is it's setting up a connection using Chan one Chan one is the name this all important name we've been talking about of the channel to be used for communication between the client and the server there must be a corresponding server con channel of this name that is


00:08:08
defined on the server and when what that means is that is something you do administratively an administrator an administrator sets up the server con but you're but this is important because the application is looking for Chan one so your server must also have a Chan one uh under for Server con we're going to see that in a second and then then third you're going to have this tcpi IP connection which will is using the transport obviously that is the transport that the client is using to connect to the server and then it uses Port 1414 which is the default in fact for websphere mq now what does that look like I know that we haven't actually opened up websphere mq Explorer yet but here it is and I just want to show you very quickly what this looks like if I double click on this channel this is a built-in channel from uh icfm IBM counter fraud management and take a look here is the channel name they're not using you know we just saw of course but this is the channel name the all important channel name that will be defined in the application here it is


00:09:09
and then it has a type and that type must be compatible as we said and you can see other information that's pretty interesting the Q manager name is CF qm and the transmission protocol TCP and Local Host and witch port and these sorts of things we'll cover these later but the important thing is what we just saw this that name must match and if it does along with the type then you'll have proper communication between the two endpoints of the channel

