
00:00:02
[Music] hi my name's max and i'm a developer with ibm mq in this video i'm going to show you how messaging fits into your application and i'm going to show you an example as well if you need to do some messaging in your application and you just want to do something that's simple and synchronous that just works quite quickly then you can use rest but if you use rest you don't get asynchronous messaging you don't get a short delivery and you don't get more powerful messaging patterns like transactions if you want to use more advanced features messaging you're going to need a messaging provider to use that what you'll do in your application is you'll write some code to an api which we'll call messaging libraries which do a lot of that messaging heavy lifting for you so that code will communicate with cues it will deal with transactions with tls security and so on in java a really popular messaging api is jms which is a provider agnostic api which basically means that when you're writing some code you write to the api and you can change the vendor that you're using in the back end so you don't have to be locked in to a specific vendor so in this video


00:01:04
today we're going to show you an example using jms with ibm mq at the end of the video we'll show you some samples that you can use in multiple languages to write some production ready code in this video we're going to use a pair of sample applications which are based on the content in this tutorial so we're going to put a message and then we're going to get it again and we're going to do that from my machine using my installation of mq in a container but typically this communication would be done between applications running on different systems a typical use case might be an online shopping application where a customer would click a buy it now button and that would send a message from an ordering app to a stock app asking to place that customer order in our example today the putting part represent that ordering step and the getting part would represent that placing of the order from the stock app so let's go and have a look so this is my directory structure for the application i'm going to be running so we can see we've got lots of empty folders here and then we've got a folder called jms which contains our java files which are the files we're going to be using now


00:02:06
we've also got a couple of jar files which are these files here so this file here is basically what contains the ibm mq libraries so it contains the libraries that we'll talk to and this is the jms jar file which basically contains the jms code that we're going to be using so let's go and have a look at our actual java code so here i am inside of visual studio code and this is my jms put.


00:02:27
java file so what's basically happening here is that i'm importing some libraries from the jar file for jms i'm also importing some libraries for the jar file for mq then i'm setting some variables here so these are variables that the application will use to connect to mq and so we're setting the host so i'm running mq inside of a container which basically means i'm communicating to localhost because it's running on my machine so i'm using port 1414 and i've specified the channel the queue manager and the app user now the app password i actually set when i run my container for the first time so if you're using a container make sure you know what that password is other than that what we're doing is we're creating a connection factory which is jms's way of letting us create connections to the messaging provider then we're setting the properties that we declared above here so finally we can actually look at the code that's doing some messaging and there really isn't that much of it looking at it so basically what we're doing is we're


00:03:29
creating some objects that jms is going to use to connect to a messaging provider which in our case will be ibm mq then here we're creating a message that's all this stuff is doing we're just creating a message there and finally we're going to create a producer which lets us send that message to the destination which is the queue that we specified above so that's all the stuff we really need to do so below that all we're really doing is catching errors so that's the jms put java application and the jms get.java application is actually very similar so all of this stuff is the same and the only real difference is that instead of creating a producer we're creating a consumer so here we can see we're creating a consumer and the destination we specify is going to be the queue that we specify and then we take that message we pass that message and then we print it out and that's the only difference really between those two applications and that should basically explain what they do so now we know what they do i'm going to go to my terminal and actually run these things and we can have a look at what they're doing


00:04:30
okay so i'm just going to show you that i've got mq running inside a docker container so we can see here that i am running mq because i'm running the latest mq image in this container and that's up right now so now we're ready to actually run those java applications so to run that put i'm actually going to copy and paste a command but if you're interested and you want to learn more yourself and try it out yourself then you can learn more here or in the description below this video okay so this is the command i want to use to run my jms put application so if i hit enter we'll see some output so we can see there that we've sent a message and we've got all of this text all of this extra stuff about the jms message class and we can see that we put the message to devcue one on the q manager and we can see that we put the message your lucky number today is six eight nine so now we've put the message let's go and have a look at it so i'm going to show you what the message looks like inside the mq console and we set that up in the video here if you want to do something similar yourself but just going over there now we're inside the console and if we click on a manage qm1 which is the queue manager


00:05:30
i've set up we can see that we've got one message on the queue dev q1 if i click on that queue we can see that message was put from the application we expect and we can see that the application data is that your looking number today is 689 which is what we expect to see so we'll go back to our terminal now and i'll show you what it looks like when we get that message all right so we're in my terminal now and we can see that i've got a similar command to before the only difference is i've changed my file i'm running to be jms get not jms put so if i hit enter there this will run that jms get application and we can see that it's going to get the message from the queue and you can see there it's received it and it's received the message your lucky number today is 689 which is exactly what we expect to see so we know that this has been a success finally if i go to my console i can see that there was a message here but if i refresh this i can see that that message has now gone it's been purged from the queue because we've already got it from the app so the example we gave earlier where you place an order online and that order goes to a stock app which takes some stock for you


00:06:31
that would be the kind of process that would go on here so what would happen is that ordering app would put a message onto a queue and then that stock app would get the message from the queue so we can see there that it would work in a similar way although in practice in production obviously they wouldn't both be on my machine we'd actually do something a bit more interesting and we might do that in the cloud for example or we might do that communicating between different systems so it might be that the stock app is running on a mainframe for example and the ordering app is running in the cloud so we've got a lot of options here and that's really an important thing to think about if you want to go through a java example yourself we've got a tutorial for that here if you want to just get started using some code that works straight away in multiple languages then have a look at this repo here so this repo is a place where we have our production ready sample code in multiple languages stay tuned because we'll do a video on this repo soon we'll show you how to use it and how to get going but for now thanks very much for watching leave us a like if this video was helpful leave us a comment if there's anything you'd like to see anything you want to share other than that thanks very much for watching we'll see you next time cheers bye

